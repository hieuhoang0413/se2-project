<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="_layout">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orders List - Elite Home Admin</title>
</head>

<body class="bg-white">
    <div layout:fragment="content">
        <!-- Main Content - With Standard Website Margins -->
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <h1 class="text-2xl font-bold mb-6">Orders List</h1>

            <div class="flex justify-between items-center mb-6">
                <div class="relative w-80">
                    <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="w-5 h-5 text-gray-400">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                        </svg>
                    </div>
                    <input type="text"
                        class="bg-white border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5"
                        placeholder="Search..." th:value="${searchQuery}">
                </div>

                <button id="deleteSelectedBtn" class="text-blue-600 hover:text-blue-800 p-1">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
                    </svg>
                </button>
            </div>

            <!-- Orders Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
                <!-- Order Card -->
                <div th:each="order, stat : ${orders ?: {'1', '2', '3', '4', '5', '6', '7', '8', '9'}}"
                    class="border rounded-md p-4 relative">
                    <div class="flex justify-between items-start mb-4">
                        <h2 class="text-lg font-semibold" th:text="${'Order: #' + (order?.id ?: '12512B')}">Order:
                            #12512B</h2>
                        <div class="flex space-x-2">
                            <a th:href="@{'/admin/orders/edit/' + ${order?.id ?: '12512B'}}"
                                class="text-blue-600 hover:text-blue-800">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10" />
                                </svg>
                            </a>
                            <button class="text-blue-600 hover:text-blue-800"
                                th:data-order-id="${order?.id ?: '12512B'}">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
                                </svg>
                            </button>
                        </div>
                    </div>

                    <p class="text-sm text-gray-500 mb-4" th:text="${order?.date ?: 'May 5, 4:20 PM'}">May 5, 4:20 PM
                    </p>

                    <div class="space-y-3 mb-8">
                        <div class="flex justify-between">
                            <span class="font-medium">Customer</span>
                            <span th:text="${order?.customer ?: 'Tom Anderson'}">Tom Anderson</span>
                        </div>

                        <div class="flex justify-between items-center">
                            <span class="font-medium">Payment status</span>
                            <span
                                class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded">Paid</span>
                        </div>

                        <div class="flex justify-between items-center">
                            <span class="font-medium">Order status</span>
                            <span
                                class="bg-orange-100 text-orange-800 text-xs font-medium px-2.5 py-0.5 rounded">Ready</span>
                        </div>

                        <div class="flex justify-between">
                            <span class="font-medium">Total</span>
                            <span th:text="${order?.total ?: '$49.50'}">$49.50</span>
                        </div>
                    </div>

                    <div class="absolute bottom-4 right-4">
                        <input type="checkbox" class="h-4 w-4 text-blue-600 rounded border-gray-300 focus:ring-blue-500"
                            th:checked="${order?.selected}">
                    </div>
                </div>
            </div>

            <!-- Pagination -->
            <div class="flex justify-center">
                <nav class="flex items-center space-x-2">
                    <a href="#" class="p-2 rounded-md hover:bg-gray-100"
                        th:class="${currentPage == 1 ? 'text-gray-400 cursor-not-allowed' : ''}">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="w-5 h-5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
                        </svg>
                    </a>

                    <a href="#" class="w-8 h-8 flex items-center justify-center rounded-md hover:bg-gray-100"
                        th:text="${1}">1</a>

                    <a href="#" class="w-8 h-8 flex items-center justify-center rounded-md bg-blue-600 text-white"
                        th:text="${2}">2</a>

                    <a th:each="page : ${#numbers.sequence(3, 6)}" href="#"
                        class="w-8 h-8 flex items-center justify-center rounded-md hover:bg-gray-100"
                        th:text="${page}">3</a>

                    <span class="px-2">...</span>

                    <a href="#" class="w-8 h-8 flex items-center justify-center rounded-md hover:bg-gray-100"
                        th:text="${totalPages ?: '24'}">24</a>

                    <a href="#" class="p-2 rounded-md hover:bg-gray-100">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor" class="w-5 h-5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
                        </svg>
                    </a>
                </nav>
            </div>
        </main>
    </div>

    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Delete Confirmation Modal (Hidden by default) -->
    <div id="deleteModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg p-6 max-w-md w-full">
            <h3 class="text-lg font-bold mb-4">Confirm Delete</h3>
            <p class="mb-6">Are you sure you want to delete this order? This action cannot be undone.</p>
            <div class="flex justify-end space-x-3">
                <button id="cancelDelete"
                    class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-100">Cancel</button>
                <button id="confirmDelete"
                    class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700">Delete</button>
            </div>
        </div>
    </div>

    <!-- Delete Selected Modal (Hidden by default) -->
    <div id="deleteSelectedModal"
        class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg p-6 max-w-md w-full">
            <h3 class="text-lg font-bold mb-4">Delete Selected Orders</h3>
            <p class="mb-6">Are you sure you want to delete all selected orders? This action cannot be undone.</p>
            <div class="flex justify-end space-x-3">
                <button id="cancelDeleteSelected"
                    class="px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-100">Cancel</button>
                <button id="confirmDeleteSelected"
                    class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700">Delete Selected</button>
            </div>
        </div>
    </div>

    <script>
        // Delete modal functionality
        document.addEventListener('DOMContentLoaded', function () {
            const deleteButtons = document.querySelectorAll('[data-order-id]');
            const deleteModal = document.getElementById('deleteModal');
            const cancelDelete = document.getElementById('cancelDelete');
            const confirmDelete = document.getElementById('confirmDelete');
            let orderIdToDelete = null;

            deleteButtons.forEach(button => {
                button.addEventListener('click', function () {
                    orderIdToDelete = this.getAttribute('data-order-id');
                    deleteModal.classList.remove('hidden');
                });
            });

            cancelDelete.addEventListener('click', function () {
                deleteModal.classList.add('hidden');
                orderIdToDelete = null;
            });

            confirmDelete.addEventListener('click', function () {
                if (orderIdToDelete) {
                    // Here you would typically make an AJAX request to delete the order
                    console.log('Deleting order ID:', orderIdToDelete);

                    // For demo purposes, just hide the modal
                    deleteModal.classList.add('hidden');
                    orderIdToDelete = null;

                    // You could redirect or refresh the page after successful deletion
                    // window.location.reload();
                }
            });

            // Delete selected functionality
            const deleteSelectedBtn = document.getElementById('deleteSelectedBtn');
            const deleteSelectedModal = document.getElementById('deleteSelectedModal');
            const cancelDeleteSelected = document.getElementById('cancelDeleteSelected');
            const confirmDeleteSelected = document.getElementById('confirmDeleteSelected');

            deleteSelectedBtn.addEventListener('click', function () {
                const selectedCheckboxes = document.querySelectorAll('input[type="checkbox"]:checked');
                if (selectedCheckboxes.length > 0) {
                    deleteSelectedModal.classList.remove('hidden');
                } else {
                    alert('Please select at least one order to delete.');
                }
            });

            cancelDeleteSelected.addEventListener('click', function () {
                deleteSelectedModal.classList.add('hidden');
            });

            confirmDeleteSelected.addEventListener('click', function () {
                const selectedCheckboxes = document.querySelectorAll('input[type="checkbox"]:checked');
                const selectedOrderIds = Array.from(selectedCheckboxes).map(checkbox => {
                    // In a real application, you would get the order ID from the checkbox
                    // For this example, we're just counting them
                    return 'selected-order';
                });

                // Here you would typically make an AJAX request to delete the selected orders
                console.log('Deleting selected orders:', selectedOrderIds.length);

                // For demo purposes, just hide the modal
                deleteSelectedModal.classList.add('hidden');

                // You could redirect or refresh the page after successful deletion
                // window.location.reload();
            });
        });
    </script>
</body>

</html>