<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="_layout">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop</title>
</head>

<body>
    <div class="flex flex-col justify-center items-center w-full px-8 lg:px-[80px] pt-[60px] pb-[100px]"
        layout:fragment="content">
        <div class="w-full flex gap-6">
            <div class="w-[262px]">
                <label class="block text-[#6C7275] mb-2" for="categories">CATEGORIES:</label>
                <select class="w-full h-[48px] rounded-md py-2 px-4 border-[2px] border-[#6C7275] font-[600]"
                    id="categories" name="categoryId">
                    <option value="" disabled selected>All</option>
                    <option th:each="cat : ${categoryList}" th:value="${cat.id}" th:text="${cat.name}"
                        th:selected="${product?.category?.id == cat.id}"></option>
                </select>
            </div>
            <div class="w-[262px]">
                <label class="block text-[#6C7275] mb-2" for="price">PRICE:</label>
                <select class="w-full h-[48px] rounded-md py-2 px-4 border-[2px] border-[#6C7275] font-[600]" id="price"
                    name="categoryId">
                    <option value="" disabled selected>All Price</option>
                    <option th:each="cat : ${categoryList}" th:value="${cat.id}" th:text="${cat.name}"
                        th:selected="${product?.category?.id == cat.id}"></option>
                </select>
            </div>
        </div>

        <!-- Product list -->
        <div class="w-full mt-10 flex gap-4 flex-wrap">
            <a th:href="@{/product/{id}(id=${product.id})}" th:each="product : ${products}"
                class="product-item block flex-shrink-0 hover:shadow-2xl hover:scale-[101%] h-[280px] w-[152px] lg:h-[460px] lg:w-[260px] mb-4 border border-gray-200 cursor-pointer">
                <div class="relative flex flex-col items-center justify-end pt-6 bg-[#F3F5F7] w-full h-[200px] lg:h-[350px] ">
                    <img class="absolute top-0 lg:top-10 w-full h-full object-cover" th:src="@{uploads/images/{file}(file=${product.image})}"
                        alt="Error Image" />
                    <div
                        class="absolute bg-white top-4 left-4 w-[66px] h-[24px] rounded-sm text-center text-base font-bold uppercase">
                        New
                    </div>
                </div>
                <div class="w-full mt-3 ml-4">
                    <div class="flex">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path
                                d="M7.53834 1.10997C7.70914 0.699319 8.29086 0.699318 8.46166 1.10996L9.99874 4.80556C10.0707 4.97868 10.2336 5.09696 10.4204 5.11194L14.4102 5.4318C14.8535 5.46734 15.0332 6.02059 14.6955 6.30993L11.6557 8.91378C11.5133 9.03576 11.4512 9.22715 11.4947 9.40952L12.4234 13.3028C12.5265 13.7354 12.0559 14.0773 11.6764 13.8455L8.26063 11.7592C8.10062 11.6615 7.89938 11.6615 7.73937 11.7592L4.32363 13.8455C3.94408 14.0773 3.47345 13.7354 3.57665 13.3028L4.50534 9.40952C4.54884 9.22715 4.48665 9.03576 4.34426 8.91378L1.30453 6.30993C0.966758 6.02059 1.14652 5.46734 1.58985 5.4318L5.57955 5.11194C5.76645 5.09696 5.92925 4.97868 6.00126 4.80556L7.53834 1.10997Z"
                                fill="#343839" />
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path
                                d="M7.53834 1.10997C7.70914 0.699319 8.29086 0.699318 8.46166 1.10996L9.99874 4.80556C10.0707 4.97868 10.2336 5.09696 10.4204 5.11194L14.4102 5.4318C14.8535 5.46734 15.0332 6.02059 14.6955 6.30993L11.6557 8.91378C11.5133 9.03576 11.4512 9.22715 11.4947 9.40952L12.4234 13.3028C12.5265 13.7354 12.0559 14.0773 11.6764 13.8455L8.26063 11.7592C8.10062 11.6615 7.89938 11.6615 7.73937 11.7592L4.32363 13.8455C3.94408 14.0773 3.47345 13.7354 3.57665 13.3028L4.50534 9.40952C4.54884 9.22715 4.48665 9.03576 4.34426 8.91378L1.30453 6.30993C0.966758 6.02059 1.14652 5.46734 1.58985 5.4318L5.57955 5.11194C5.76645 5.09696 5.92925 4.97868 6.00126 4.80556L7.53834 1.10997Z"
                                fill="#343839" />
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path
                                d="M7.53834 1.10997C7.70914 0.699319 8.29086 0.699318 8.46166 1.10996L9.99874 4.80556C10.0707 4.97868 10.2336 5.09696 10.4204 5.11194L14.4102 5.4318C14.8535 5.46734 15.0332 6.02059 14.6955 6.30993L11.6557 8.91378C11.5133 9.03576 11.4512 9.22715 11.4947 9.40952L12.4234 13.3028C12.5265 13.7354 12.0559 14.0773 11.6764 13.8455L8.26063 11.7592C8.10062 11.6615 7.89938 11.6615 7.73937 11.7592L4.32363 13.8455C3.94408 14.0773 3.47345 13.7354 3.57665 13.3028L4.50534 9.40952C4.54884 9.22715 4.48665 9.03576 4.34426 8.91378L1.30453 6.30993C0.966758 6.02059 1.14652 5.46734 1.58985 5.4318L5.57955 5.11194C5.76645 5.09696 5.92925 4.97868 6.00126 4.80556L7.53834 1.10997Z"
                                fill="#343839" />
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path
                                d="M7.53834 1.10997C7.70914 0.699319 8.29086 0.699318 8.46166 1.10996L9.99874 4.80556C10.0707 4.97868 10.2336 5.09696 10.4204 5.11194L14.4102 5.4318C14.8535 5.46734 15.0332 6.02059 14.6955 6.30993L11.6557 8.91378C11.5133 9.03576 11.4512 9.22715 11.4947 9.40952L12.4234 13.3028C12.5265 13.7354 12.0559 14.0773 11.6764 13.8455L8.26063 11.7592C8.10062 11.6615 7.89938 11.6615 7.73937 11.7592L4.32363 13.8455C3.94408 14.0773 3.47345 13.7354 3.57665 13.3028L4.50534 9.40952C4.54884 9.22715 4.48665 9.03576 4.34426 8.91378L1.30453 6.30993C0.966758 6.02059 1.14652 5.46734 1.58985 5.4318L5.57955 5.11194C5.76645 5.09696 5.92925 4.97868 6.00126 4.80556L7.53834 1.10997Z"
                                fill="#343839" />
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path
                                d="M7.53834 1.10997C7.70914 0.699319 8.29086 0.699318 8.46166 1.10996L9.99874 4.80556C10.0707 4.97868 10.2336 5.09696 10.4204 5.11194L14.4102 5.4318C14.8535 5.46734 15.0332 6.02059 14.6955 6.30993L11.6557 8.91378C11.5133 9.03576 11.4512 9.22715 11.4947 9.40952L12.4234 13.3028C12.5265 13.7354 12.0559 14.0773 11.6764 13.8455L8.26063 11.7592C8.10062 11.6615 7.89938 11.6615 7.73937 11.7592L4.32363 13.8455C3.94408 14.0773 3.47345 13.7354 3.57665 13.3028L4.50534 9.40952C4.54884 9.22715 4.48665 9.03576 4.34426 8.91378L1.30453 6.30993C0.966758 6.02059 1.14652 5.46734 1.58985 5.4318L5.57955 5.11194C5.76645 5.09696 5.92925 4.97868 6.00126 4.80556L7.53834 1.10997Z"
                                fill="#343839" />
                        </svg>
                    </div>

                    <p th:text="${product.name}" class="font-[600] text-[14px] my-1 leading-6"></p>
                    <div class="flex gap-3">
                        <p th:text="'$' + ${#numbers.formatDecimal(product.price, 1, 2)}" class="font-[600] text-[12px]"></p>
                        <p class="text-[#6C7275] line-through text-[12px]">$500.00</p>
                    </div>
                </div>
            </a>
        </div>
        <!-- Nút Show More -->
        <button
            class="border border-[#141718] mt-20 rounded-[80px] w-[164px] h-[40px] font-[500] hover:bg-black hover:text-white"
            id="showMore">Show More</button>
            
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                let visibleProducts = 12; // Ban đầu hiển thị tối đa 12 sản phẩm
                const allProducts = document.querySelectorAll(".product-item");
                const showMoreBtn = document.getElementById("showMore");

                console.log(allProducts.length);


                function showProducts() {
                    for (let i = 0; i < allProducts.length; i++) {
                        if (i < visibleProducts) {
                            allProducts[i].style.display = "table-row"; // Hiển thị sản phẩm
                        } else {
                            allProducts[i].style.display = "none"; // Ẩn sản phẩm chưa hiển thị
                        }
                    }

                    // Ẩn nút Show More nếu sản phẩm hiển thị >= tổng số sản phẩm
                    if (visibleProducts >= allProducts.length || allProducts.length <= 12) {
                        showMoreBtn.style.display = "none";
                    }
                }

                showProducts(); // Hiển thị sản phẩm ban đầu

                showMoreBtn.addEventListener("click", function () {
                    visibleProducts += 12; // Hiển thị thêm tối đa 12 sản phẩm nữa
                    showProducts();
                });
            });

        </script>
    </div>

</body>
<script src="https://cdn.tailwindcss.com"></script>

</html>